<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <div class="row">
        <div class="col-8">
            <form data-form>
                <div class="mb-2">
                    <label for="title" class="form-label">Title</label>
                    <input name="title" type="text" class="form-control" id="title" placeholder="title">
                </div>
                <div class="mb-2">
                    <label for="description" class="form-label">Description</label>
                    <input name="description" type="text" class="form-control" id="description" placeholder="Description">
                </div>
                <div class="mb-3">
                    <label for="price" class="form-label">Price</label>
                    <input name="price" type="number" class="form-control" id="price" placeholder="price">
                </div>
                <button type="submit" class="btn btn-success">Save</button>
            </form>
            <a href="index.html">Головна</a>
        </div>
        <!--      <div class="col-4" data-form-values></div>-->
    </div>
</div>
<script src="./js/model.js"></script>
<!--<script src="./js/controller.js"></script>-->
<script>
    // Handle form events
     const form = document.querySelector('[data-form]');
    //
     const submitBtn = form.querySelector('[type="submit"]');
    // submitBtn.setAttribute('disabled', 'disabled');
    // submitBtn.disabled = true;

    const inputs = Array.from(form.querySelectorAll('input'));

    //console.log(localStorage.getItem('selectedProductID'));

    //const product = dataBase.getDataById(Number(localStorage.getItem('selectedProductID')));
    //console.log(product);

    // inputs.forEach(input => {
    //     const name = input.name;
    //     if (product.hasOwnProperty(name)) {
    //         input.value = product[name];
    //     }
    // });

    form.addEventListener('submit', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const {target} = e;

        // Get data from the form
        const data = inputs.reduce((acc, {name, value}) =>{
            acc[name] = value;
            return acc;
        }, {});


        target.reset()

        const savedContact = dataBase.setData(data);
        window.location.href = 'index.html';
        //  const template = ui.createTemplate(savedContact);
        //   ui.renderContact(template);
    });
    const disabledHandler = (e) => {
        let isInputFilled = true;
        for(let i = 0; i < inputs.length; i++) {
            if(!inputs[i].value.trim().length) {
                isInputFilled = false;
                break;
            }
        }

        if(isInputFilled) {
            submitBtn.removeAttribute('disabled')
            submitBtn.disabled = false;
        } else {
            submitBtn.setAttribute('disabled', 'disabled');
            submitBtn.disabled = true;
        }
    }
    form.addEventListener('input', disabledHandler);

</script>
</body>
</html>